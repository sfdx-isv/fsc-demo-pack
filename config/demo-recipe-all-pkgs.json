{
  "recipeName":     "FSC Demo Pack",
  "description":    "A Recipe for building Financial Service Cloud (FSC) demo orgs",
  "recipeType":     "appx:demo-recipe",
  "recipeVersion":  "1.0.1",
  "schemaVersion":  "0.1.2",
  "options":  {
    "haltOnError":      true,
    "noCustomInstall":  false,
    "skipGroups":       [],
    "skipActions":      ["import-data-tree"],
    "targetOrgs": [
      {
        "orgName":        "Scratch Org Demo",
        "alias":          "sfdx-isv_fsc-demo-pack_scratch-demo",
        "description":    "Installs the FSC Demo Pack in a Scratch Org",
        "isScratchOrg":   true,
        "scratchDefJson": "demo-scratch-def.json"
      }
    ]
  },
  "recipeStepGroups": [
    {
      "stepGroupName":  "Install Packages",
      "alias":          "install-packages",
      "description":    "Installs all managed and unmanged packages required by the demo. /packaging/installPackage.apexp?p0=",
      "recipeSteps": [
        { 
          "stepName":     "Install FSC Managed Package",
          "description":  "Installs version 216.1.0 of the FSC managed package",
          "action":       "install-package",
          "options": {
            "packageName":      "Financial Services Cloud (Managed Package), Version 216.1.0",
            "packageVersionId": "04t80000000jZjl"
          }
        },
        {
          "stepName":     "Install FSC Extension Package (unmanaged)",
          "description":  "Installs version 216.X of the unmanaged FSC Extension Package",
          "action":       "install-package",
          "options": {
            "packageName":      "Financial Services Cloud (Unmanaged Package), Version 216.X",
            "packageVersionId": "04t80000001AWVh"
          }
        },
        {
          "stepName":     "Install Financial Services Referral Ext (unmanaged)",
          "description":  "Installs version 216.X of the unmanaged Financial Services Referral Ext",
          "action":       "install-package",
          "options": {
            "packageName":      "Financial Services Referral Ext (Unmanaged Package), Version 216.X",
            "packageVersionId": "04t80000001AWrf"
          }
        },
        {
          "stepName":     "Install Financial Services Commercial Banking Ext (unmanaged)",
          "description":  "Installs version 216.X of the unmanaged Financial Services Commercial Banking Ext",
          "action":       "install-package",
          "options": {
            "packageName":      "Financial Services Commercial Banking Ext (Unmanaged Package), Version 216.X",
            "packageVersionId": "04t80000000lTrP"
          }
        },
        {
          "stepName":     "Install Financial Services Cloud - Einstein Analytics (unmanaged)",
          "description":  "Installs version 216.X of the unmanaged Financial Services Cloud - Einstein Analytics",
          "action":       "install-package",
          "options": {
            "packageName":      "Financial Services Cloud - Einstein Analytics (Unmanaged Package), Version 216.X",
            "packageVersionId": "04tB0000000JliU"
          }
        },
        {
          "stepName":     "Install Chatbot for Industries (unmanaged)",
          "description":  "Installs version 216.X of the unmanaged Chatbot for Industries",
          "action":       "install-package",
          "options": {
            "packageName":      "Chatbot for Industries (Unmanaged Package), Version 216.X",
            "packageVersionId": "04tB00000006LEy"
          }
        }
      ]
    },
    {
      "stepGroupName":    "Deploy Metadata",
      "alias":            "deploy-metadata",
      "description":      "Deploys code from the mdapi-source directory",
      "recipeSteps": [
        {
          "stepName":     "Deploy App Config",
          "description":  "Deploys metadata found in mdapi-source/app-config",
          "action":       "deploy-metadata",
          "options": {
            "mdapiSource": "app-config"
          }
        },
        {
          "stepName":     "Deploy Data Config",
          "description":  "Deploys metadata found in mdapi-source/data-config",
          "action":       "deploy-metadata",
          "options": {
            "mdapiSource": "data-config"
          }
        },
        {
          "stepName":     "Deploy Org Config",
          "description":  "Deploys metadata found in mdapi-source/org-config",
          "action":       "deploy-metadata",
          "options": {
            "mdapiSource": "org-config"
          }
        }
      ]
    },
    {
      "stepGroupName":    "Create and Configure Users",
      "alias":            "create-users",
      "description":      "Configure the Admin User and create primary and secondary demo users",
      "recipeSteps": [
        {
          "stepName":     "Configure Admin User",
          "description":  "Configures the Admin User based on demo-user-admin.json",
          "action":       "configure-admin-user",
          "options": {
            "definitionFile": "demo-user-admin.json"
          }
        },
        {
          "stepName":     "Create Primary Demo User",
          "description":  "Creates a demo user based on demo-user-primary.json",
          "action":       "create-user",
          "options": {
            "definitionFile": "demo-user-primary.json",
            "sfdxUserAlias":  "sfdx-isv_primary-demo-user"
          }
        },
        {
          "stepName":     "Create Secondary Demo User",
          "description":  "Creates a demo user based on demo-user-secondary.json",
          "action":       "create-user",
          "options": {
            "definitionFile": "demo-user-secondary.json",
            "sfdxUserAlias":  "sfdx-isv_secondary-demo-user"
          }
        }
      ]
    },
    {
      "stepGroupName":    "Import/Create Data",
      "alias":            "import-data",
      "description":      "Imports or creates data in the demo org",
      "recipeSteps": [
        {
          "stepName":     "Import FSC App Config Data",
          "description":  "Data tree import of simple config data used by FSC to control how the app behaves",
          "action":       "import-data-tree",
          "options": {
            "plan":       "data-import-plan.json"
          }
        },
        {
          "stepName":     "Create FSC Demo Data",
          "description":  "Uses anonymous Apex to call FscDemoPack_DataSetup.createAllDemoData(), which creates FSC test data in the org.",
          "action":       "execute-apex",
          "options": {
            "apexCodeFile": "create-demo-data.apex"
          }
        }
      ]
    }
  ],
  "handlers": [
    {},
    {}
  ]
}